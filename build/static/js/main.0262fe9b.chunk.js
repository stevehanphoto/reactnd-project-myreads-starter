(this["webpackJsonpmyreads-app"]=this["webpackJsonpmyreads-app"]||[]).push([[0],{21:function(e,t,a){e.exports=a(33)},26:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(17),l=a.n(r),c=a(3),s=a(5),h=a(7),i=a(8),u=a(10),f=a(9),m=a(4),d="https://reactnd-books-api.udacity.com",b=localStorage.token;b||(b=localStorage.token=Math.random().toString(36).substr(-8));var k={Accept:"application/json",Authorization:b},g=function(e,t){return fetch("".concat(d,"/books/").concat(e.id),{method:"PUT",headers:Object(s.a)({},k,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))},v=(a(26),function(){return o.a.createElement("div",{className:"list-books-title"},o.a.createElement(c.b,{to:"/"},o.a.createElement("h1",null,"MyReads")))}),E=a(20),p=a.n(E),S=function(e){return"undefined"===typeof e.book.imageLinks?o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundColor:"lightgrey",textAlign:"center",fontSize:"1.4rem",color:"grey",verticalAlign:"middle",lineHeight:"193px"}},"No Cover"):o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(e.book.imageLinks.thumbnail,")")}})},y=function(e){return o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{value:e.book.shelf?e.book.shelf:"none",onChange:function(t){return e.onShelfChange(t.target.value)}},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read"),o.a.createElement("option",{value:"none"},"None")))},C=function(e){return o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement(S,{book:e.book}),o.a.createElement(y,{book:e.book,onShelfChange:function(t){return e.handleShelfChange(e.book,t)}})),o.a.createElement("div",{className:"book-title"},e.book.title),o.a.createElement("div",{className:"book-authors"},e.book.authors&&e.book.authors.join(", ")))},N=function(e){return o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},e.books.map((function(t){return o.a.createElement("li",{key:t.id},o.a.createElement(C,{book:t,handleShelfChange:function(t,a){return e.handleShelfChange(t,a)}}))}))))},j=function(e){var t=e.books.filter((function(t){return t.shelf===e.shelf}));return o.a.createElement("div",null,o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},p.a.startCase(e.shelf)),o.a.createElement(N,{books:t,handleShelfChange:function(t,a){return e.handleShelfChange(t,a)}})))},O=function(e){return o.a.createElement("div",{className:"list-books"},o.a.createElement(v,null),o.a.createElement("div",{className:"list-books-content"},o.a.createElement("div",null,o.a.createElement(j,{shelf:"currentlyReading",books:e.books,handleShelfChange:function(t,a){return e.handleShelfChange(t,a)}}),o.a.createElement(j,{shelf:"wantToRead",books:e.books,handleShelfChange:function(t,a){return e.handleShelfChange(t,a)}}),o.a.createElement(j,{shelf:"read",books:e.books,handleShelfChange:function(t,a){return e.handleShelfChange(t,a)}}))),o.a.createElement("div",{className:"open-search"},o.a.createElement(c.b,{to:"/search"},"Add a book")))},w=function(e){Object(u.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={books:[],query:""},e.updateQuery=function(t){e.setState({query:t}),e.searchBook(t)},e.getShelf=function(t){var a=e.props.booksOnShelf.filter((function(e){return e.id===t}));return a.length?a[0].shelf:null},e.handleShelfChange=function(t,a){var n=e.state.books.map((function(e){return e.id===t.id&&(e.shelf=a),e}));e.setState({books:n}),e.props.handleShelfChange(t,a)},e}return Object(i.a)(a,[{key:"searchBook",value:function(e){var t=this;e&&e.length>0?function(e){return fetch("".concat(d,"/search"),{method:"POST",headers:Object(s.a)({},k,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then((function(e){return e.json()})).then((function(e){return e.books}))}(e).then((function(e){var a=e.map((function(e){return e.shelf=t.getShelf(e.id),e}));t.setState({books:a})})).catch((function(e){console.log(e),t.resetSearch()})):this.resetSearch()}},{key:"resetSearch",value:function(){this.setState({books:[]})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"search-books"},o.a.createElement("div",{className:"search-books-bar"},o.a.createElement(c.b,{className:"close-search",to:"/"},"Close"),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{type:"text",placeholder:"Search by title or author",value:this.state.query,onChange:function(t){return e.updateQuery(t.target.value)}}))),o.a.createElement("div",{className:"search-books-results"},o.a.createElement("ol",{className:"books-grid"}),this.state.books&&o.a.createElement(N,{books:this.state.books,handleShelfChange:this.handleShelfChange})))}}]),a}(n.Component),A=function(){return o.a.createElement("div",null,o.a.createElement(v,null),o.a.createElement("div",{className:"message-404"},o.a.createElement("h1",null,"404 - PAGE NOT FOUND")))},R=function(e){Object(u.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={books:[]},e.handleShelfChange=function(t,a){g(t,a);var n=!1,o=e.state.books.map((function(e){return e.id===t.id?(n=!0,Object(s.a)({},e,{shelf:a})):e}));n||o.push(Object(s.a)({},t,{shelf:a})),e.setState({books:o})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(d,"/books"),{headers:k}).then((function(e){return e.json()})).then((function(e){return e.books})).then((function(t){e.setState((function(){return{books:t}}))}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"app"},o.a.createElement(m.c,null,o.a.createElement(m.a,{path:"/search",render:function(t){t.history;return o.a.createElement(w,{booksOnShelf:e.state.books,handleShelfChange:e.handleShelfChange})}}),o.a.createElement(m.a,{exact:!0,path:"/",render:function(){return o.a.createElement(O,{books:e.state.books,handleShelfChange:e.handleShelfChange})}}),o.a.createElement(m.a,{render:function(){return o.a.createElement(A,null)}})))}}]),a}(o.a.Component);a(32);l.a.render(o.a.createElement(c.a,null,o.a.createElement(R,null)),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.0262fe9b.chunk.js.map